<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Equity Calculator | Base Power Company</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

  :root {
    --bg: #3d3b38;
    --bg-card: #4a4845;
    --bg-secondary: rgba(84, 82, 79, 0.5);
    --border: #5e5c59;
    --foreground: #f0eeeb;
    --muted: #a8a6a3;
    --accent: #77a45a;
    --accent-dim: rgba(119, 164, 90, 0.15);
    --highlight-row: #54524f;
    --input-bg: #3d3b38;
    --input-border: #5e5c59;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: var(--bg);
    color: var(--foreground);
    line-height: 1.6;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  /* Header */
  header {
    position: sticky;
    top: 0;
    z-index: 50;
    background: rgba(61, 59, 56, 0.95);
    border-bottom: 1px solid var(--border);
    backdrop-filter: blur(8px);
  }

  header .inner {
    max-width: 720px;
    margin: 0 auto;
    padding: 12px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  header img {
    height: 32px;
    width: auto;
  }

  header .company-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--foreground);
  }

  /* Tab navigation */
  .tab-nav {
    max-width: 720px;
    margin: 0 auto;
    padding: 0 24px;
    display: flex;
    gap: 0;
    border-bottom: 1px solid var(--border);
  }

  .tab-btn {
    padding: 12px 20px;
    font-size: 13px;
    font-weight: 500;
    color: var(--muted);
    background: none;
    border: none;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: color 0.2s, border-color 0.2s;
    font-family: inherit;
  }

  .tab-btn:hover {
    color: var(--foreground);
  }

  .tab-btn.active {
    color: var(--foreground);
    border-bottom-color: var(--accent);
  }

  .tab-panel {
    display: none;
  }

  .tab-panel.active {
    display: block;
  }

  /* Hero section */
  .hero-section {
    background: rgba(74, 72, 69, 0.5);
    padding: 64px 24px 72px;
  }

  .hero-inner {
    max-width: 720px;
    margin: 0 auto;
  }

  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: var(--accent);
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 20px;
  }

  .hero-badge svg {
    width: 18px;
    height: 18px;
    opacity: 0.8;
  }

  .hero-section h1 {
    font-size: 48px;
    font-weight: 700;
    line-height: 1.1;
    letter-spacing: -1px;
    color: var(--foreground);
    margin-bottom: 16px;
    max-width: 500px;
  }

  .hero-section p {
    font-size: 16px;
    color: var(--muted);
    max-width: 500px;
    line-height: 1.6;
  }

  /* Main content */
  .content-section {
    max-width: 720px;
    margin: 0 auto;
    padding: 48px 24px 0;
  }

  /* Personalized name */
  .personalized {
    text-align: center;
    margin-bottom: 32px;
  }

  .personalized .label {
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: var(--muted);
    margin-bottom: 8px;
  }

  .personalized .name {
    font-size: 36px;
    font-weight: 600;
    color: var(--foreground);
  }

  /* Cards */
  .card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 32px;
    margin-bottom: 24px;
  }

  .card-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--foreground);
    margin-bottom: 4px;
  }

  .card-subtitle {
    font-size: 14px;
    color: var(--muted);
    margin-bottom: 0;
  }

  .card-header {
    padding: 24px 32px;
    border-bottom: 1px solid var(--border);
  }

  .card-body {
    padding: 0;
  }

  .card-body.padded {
    padding: 32px;
  }

  .card.no-padding {
    padding: 0;
  }

  /* Form elements */
  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 32px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  label {
    font-size: 14px;
    font-weight: 500;
    color: var(--muted);
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .input-wrap {
    position: relative;
  }

  .input-wrap .prefix {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--muted);
    font-size: 16px;
    pointer-events: none;
  }

  input[type="text"], input[type="number"] {
    width: 100%;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    border-radius: 6px;
    padding: 12px 16px;
    padding-left: 32px;
    color: var(--foreground);
    font-size: 16px;
    font-family: inherit;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    -moz-appearance: textfield;
  }

  input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(119, 164, 90, 0.2);
  }

  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  .helper-text {
    font-size: 12px;
    color: var(--muted);
  }

  /* Grant-Time Valuation fixed display */
  .grant-valuation-display {
    font-size: 28px;
    font-weight: 800;
    color: var(--accent);
    letter-spacing: -0.5px;
  }

  /* Vesting visual */
  .vesting-visual {
    margin-top: 14px;
    padding: 14px;
    background: rgba(84, 82, 79, 0.3);
    border-radius: 8px;
    border: 1px solid var(--border);
  }

  .vesting-bar-container {
    display: flex;
    gap: 3px;
    height: 28px;
    margin-bottom: 6px;
  }

  .vesting-segment {
    flex: 1;
    border-radius: 4px;
    background: var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: 600;
    color: transparent;
    transition: background 0.3s;
  }

  .vesting-segment.cliff {
    background: repeating-linear-gradient(
      -45deg,
      var(--border),
      var(--border) 3px,
      #4a4845 3px,
      #4a4845 6px
    );
  }

  .vesting-segment.vested {
    background: linear-gradient(135deg, #5a8a3f, var(--accent));
    color: #fff;
  }

  .vesting-labels {
    display: flex;
    gap: 3px;
  }

  .vesting-labels span {
    flex: 1;
    text-align: center;
    font-size: 10px;
    color: var(--muted);
  }

  /* Valuation display */
  .valuation-display {
    font-size: 44px;
    font-weight: 800;
    letter-spacing: -1.5px;
    color: var(--accent);
    margin: 6px 0 20px;
    font-variant-numeric: tabular-nums;
  }

  .slider-wrapper {
    position: relative;
    padding: 0 4px;
    margin-bottom: 8px;
  }

  /* Slider */
  .slider-area {
    margin-top: 16px;
  }

  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 8px;
    border-radius: 4px;
    outline: none;
    cursor: pointer;
  }

  input[type="range"]::-webkit-slider-runnable-track {
    height: 8px;
    border-radius: 4px;
    background: linear-gradient(90deg,
      #5a8a3f 0%,
      var(--accent) 40%,
      #d4a843 100%
    );
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: var(--foreground);
    border: 3px solid var(--accent);
    cursor: grab;
    margin-top: -9px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  input[type="range"]::-moz-range-track {
    height: 8px;
    border-radius: 4px;
    background: linear-gradient(90deg,
      #5a8a3f 0%,
      var(--accent) 40%,
      #d4a843 100%
    );
  }

  input[type="range"]::-moz-range-thumb {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: var(--foreground);
    border: 3px solid var(--accent);
    cursor: grab;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .slider-labels, .slider-markers {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 12px;
    color: var(--muted);
  }

  .slider-markers span {
    cursor: pointer;
    padding: 4px 2px;
    transition: color 0.2s;
  }

  .slider-markers span:hover {
    color: var(--accent);
  }

  /* Result area */
  .result-area {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 32px;
    margin-top: 24px;
    text-align: center;
  }

  .result-label {
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--muted);
    margin-bottom: 12px;
  }

  .result-big-value {
    font-size: 60px;
    font-weight: 700;
    color: var(--accent);
    letter-spacing: -2px;
    line-height: 1;
    margin-bottom: 12px;
    font-variant-numeric: tabular-nums;
  }

  .result-gain {
    font-size: 16px;
    color: var(--foreground);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }

  .result-gain svg {
    color: var(--accent);
  }

  /* Valuation Scenarios Table */
  .scenarios-table {
    width: 100%;
    border-collapse: collapse;
    font-variant-numeric: tabular-nums;
  }

  .scenarios-table th {
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--muted);
    padding: 12px 24px;
    text-align: left;
    border-bottom: 1px solid var(--border);
  }

  .scenarios-table th:last-child {
    text-align: right;
  }

  .scenarios-table th:nth-child(2) {
    text-align: center;
  }

  .scenarios-table td {
    padding: 14px 24px;
    font-size: 14px;
    border-bottom: 1px solid var(--border);
    color: var(--foreground);
  }

  .scenarios-table td:nth-child(2) {
    text-align: center;
  }

  .scenarios-table td:last-child {
    text-align: right;
    color: var(--accent);
    font-weight: 500;
  }

  .scenarios-table tr:last-child td {
    border-bottom: none;
  }

  .scenarios-table tr.highlighted {
    background: var(--highlight-row);
  }

  .scenarios-table td.gain-zero {
    color: var(--muted);
  }

  /* FAQ Section */
  .faq-section {
    margin-top: 8px;
    margin-bottom: 24px;
  }

  .faq-item {
    border: 1px solid var(--border);
    border-radius: 8px;
    margin-bottom: 8px;
    overflow: hidden;
    background: var(--bg-card);
  }

  .faq-question {
    width: 100%;
    background: none;
    border: none;
    padding: 18px 24px;
    font-size: 15px;
    font-weight: 600;
    color: var(--foreground);
    text-align: left;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    font-family: inherit;
    transition: background 0.15s;
  }

  .faq-question:hover {
    background: rgba(84, 82, 79, 0.3);
  }

  .faq-question .faq-icon {
    font-size: 18px;
    color: var(--accent);
    transition: transform 0.2s;
    flex-shrink: 0;
  }

  .faq-item.open .faq-question .faq-icon {
    transform: rotate(45deg);
  }

  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .faq-answer-inner {
    padding: 0 24px 20px;
    font-size: 14px;
    color: var(--muted);
    line-height: 1.7;
  }

  .faq-answer-inner p {
    margin-bottom: 10px;
  }

  .faq-answer-inner p:last-child {
    margin-bottom: 0;
  }

  .faq-answer-inner strong {
    color: var(--foreground);
  }

  /* Toggle switch */
  .toggle-row {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .toggle {
    position: relative;
    width: 44px;
    height: 24px;
    flex-shrink: 0;
  }

  .toggle input {
    opacity: 0;
    width: 0;
    height: 0;
    position: absolute;
  }

  .toggle-slider {
    position: absolute;
    cursor: pointer;
    inset: 0;
    background: var(--border);
    border-radius: 24px;
    transition: background 0.25s;
  }

  .toggle-slider::before {
    content: '';
    position: absolute;
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background: #fff;
    border-radius: 50%;
    transition: transform 0.25s;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
  }

  .toggle input:checked + .toggle-slider {
    background: var(--accent);
  }

  .toggle input:checked + .toggle-slider::before {
    transform: translateX(20px);
  }

  .toggle-sm {
    width: 36px;
    height: 20px;
  }

  .toggle-sm .toggle-slider::before {
    height: 14px;
    width: 14px;
    left: 3px;
    bottom: 3px;
  }

  .toggle-sm input:checked + .toggle-slider::before {
    transform: translateX(16px);
  }

  /* Tax section */
  .tax-section {
    margin-top: 18px;
    padding-top: 18px;
    border-top: 1px solid var(--border);
  }

  .tax-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 5px 0;
    font-size: 13px;
  }

  .tax-row .tax-label { color: var(--muted); }
  .tax-row .tax-value { font-weight: 600; color: #d47b6f; font-variant-numeric: tabular-nums; }
  .tax-row.net .tax-label { color: var(--foreground); font-weight: 600; }
  .tax-row.net .tax-value { color: var(--accent); font-size: 15px; }

  /* Horizontal bar chart */
  .chart-container { padding: 4px 0 0; }

  .chart-bar-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
  }

  .chart-label {
    width: 50px;
    font-size: 12px;
    font-weight: 600;
    color: var(--muted);
    text-align: right;
    flex-shrink: 0;
  }

  .chart-bar-track {
    flex: 1;
    height: 30px;
    background: var(--bg-secondary);
    border-radius: 6px;
    overflow: hidden;
  }

  .chart-bar-fill {
    height: 100%;
    border-radius: 6px;
    transition: width 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    display: flex;
    align-items: center;
    padding: 0 10px;
    font-size: 12px;
    font-weight: 600;
    color: #fff;
    white-space: nowrap;
    min-width: fit-content;
  }

  .chart-bar-fill.bar-1 { background: linear-gradient(90deg, #3a6b4f, #4a8a63); }
  .chart-bar-fill.bar-2 { background: linear-gradient(90deg, #4a8a63, #5a9a73); }
  .chart-bar-fill.bar-3 { background: linear-gradient(90deg, #5a9a73, #6aaa83); }
  .chart-bar-fill.bar-4 { background: linear-gradient(90deg, #6aaa83, #7aba93); }
  .chart-bar-fill.bar-5 { background: linear-gradient(90deg, #c5950f, #f7c33c); }
  .chart-bar-fill.bar-6 { background: linear-gradient(90deg, #a8d45e, #d0f585); }

  .chart-bar-value-external {
    font-size: 12px;
    font-weight: 600;
    color: var(--muted);
    margin-left: 8px;
    flex-shrink: 0;
    min-width: 72px;
  }

  /* Disclaimer */
  .disclaimer {
    text-align: center;
    margin: 24px 0 48px;
    padding: 0 24px;
  }

  .disclaimer p {
    font-size: 10px;
    line-height: 1.6;
    color: var(--muted);
    max-width: 600px;
    margin: 0 auto;
  }

  /* CTA Section */
  .cta-section {
    background: rgba(74, 72, 69, 0.5);
    padding: 64px 24px;
    text-align: center;
  }

  .cta-section h2 {
    font-size: 30px;
    font-weight: 600;
    color: var(--foreground);
    margin-bottom: 12px;
  }

  .cta-section p {
    font-size: 16px;
    color: var(--muted);
    max-width: 480px;
    margin: 0 auto 24px;
    line-height: 1.6;
  }

  .cta-button {
    display: inline-block;
    background: var(--foreground);
    color: var(--bg);
    padding: 12px 32px;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 500;
    text-decoration: none;
    transition: opacity 0.2s;
    font-family: inherit;
    border: none;
    cursor: pointer;
  }

  .cta-button:hover {
    opacity: 0.9;
  }

  /* Footer */
  footer {
    padding: 24px;
    border-top: 1px solid var(--border);
  }

  footer .inner {
    max-width: 720px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  footer img {
    height: 20px;
    width: auto;
    opacity: 0.6;
  }

  footer .confidential {
    font-size: 11px;
    color: var(--muted);
  }

  /* Animations */
  .animating {
    transition: transform 0.15s;
    transform: scale(1.02);
  }

  /* ─── Cost of Living (dark theme overrides) ─── */
  .col-hero {
    background: linear-gradient(135deg, rgba(119, 164, 90, 0.15) 0%, rgba(84, 82, 79, 0.5) 100%);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 36px 28px;
    margin-bottom: 24px;
    text-align: center;
    color: var(--foreground);
  }

  .col-hero h2 {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 6px;
  }

  .col-hero p {
    font-size: 14px;
    color: var(--muted);
    max-width: 400px;
    margin: 0 auto;
  }

  .col-inputs {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 16px;
    align-items: end;
    margin-bottom: 10px;
  }

  .col-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    padding-bottom: 10px;
    color: var(--accent);
    font-size: 20px;
    font-weight: 700;
  }

  .col-fixed-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--accent);
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 5px;
  }

  .col-fixed-city {
    background: var(--accent-dim);
    border: 2px solid var(--accent);
    border-radius: 6px;
    padding: 10px 12px;
    font-size: 14px;
    font-weight: 600;
    color: var(--accent);
  }

  .col-result-hero {
    text-align: center;
    padding: 28px 20px;
    margin-bottom: 24px;
  }

  .col-percentage {
    font-size: 56px;
    font-weight: 800;
    letter-spacing: -2px;
    line-height: 1;
    margin-bottom: 4px;
  }

  .col-percentage.cheaper { color: var(--accent); }
  .col-percentage.pricier { color: #e07c5a; }

  .col-direction-text {
    font-size: 15px;
    color: var(--muted);
    font-weight: 500;
  }

  .col-direction-text strong { color: var(--accent); }

  .salary-compare {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    margin-bottom: 18px;
  }

  .salary-box {
    background: rgba(84, 82, 79, 0.4);
    border-radius: 8px;
    padding: 18px 16px;
    text-align: center;
    border: 1px solid var(--border);
  }

  .salary-box.austin {
    background: var(--accent-dim);
    border: 1px solid rgba(119, 164, 90, 0.3);
  }

  .salary-box-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    color: var(--muted);
    margin-bottom: 4px;
  }

  .salary-box-value {
    font-size: 28px;
    font-weight: 700;
    letter-spacing: -0.5px;
    font-variant-numeric: tabular-nums;
    color: var(--foreground);
  }

  .salary-box.austin .salary-box-value { color: var(--accent); }

  .salary-box-sub {
    font-size: 11px;
    color: var(--muted);
    margin-top: 2px;
  }

  .offer-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }

  .purchasing-power-row {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 14px 0;
    border-bottom: 1px solid var(--border);
  }

  .purchasing-power-row:last-child { border-bottom: none; }

  .pp-icon {
    width: 36px;
    height: 36px;
    background: var(--accent-dim);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
  }

  .pp-content { flex: 1; }

  .pp-label {
    font-size: 13px;
    font-weight: 500;
    color: var(--muted);
  }

  .pp-values {
    display: flex;
    gap: 16px;
    margin-top: 2px;
  }

  .pp-val {
    font-size: 14px;
    font-weight: 600;
    font-variant-numeric: tabular-nums;
  }

  .pp-val.origin { color: var(--muted); text-decoration: line-through; }
  .pp-val.austin { color: var(--accent); }

  .col-category-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
  }

  .col-cat-label {
    width: 100px;
    font-size: 12px;
    font-weight: 500;
    color: var(--muted);
    text-align: right;
    flex-shrink: 0;
  }

  .col-cat-bar-area {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .col-cat-bar-track {
    flex: 1;
    height: 24px;
    background: rgba(84, 82, 79, 0.4);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
  }

  .col-cat-bar-track .baseline {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 1px;
    background: var(--muted);
    opacity: 0.3;
  }

  .col-cat-bar-fill {
    position: absolute;
    top: 2px;
    bottom: 2px;
    border-radius: 3px;
    transition: left 0.4s, width 0.4s;
  }

  .col-cat-bar-fill.cheaper { background: var(--accent); }
  .col-cat-bar-fill.pricier { background: #e07c5a; }

  .col-cat-pct {
    width: 48px;
    font-size: 12px;
    font-weight: 600;
    flex-shrink: 0;
    text-align: left;
  }

  .col-cat-pct.cheaper { color: var(--accent); }
  .col-cat-pct.pricier { color: #e07c5a; }

  .city-search-wrapper { position: relative; }

  .city-search-wrapper input {
    padding-left: 16px;
    padding-right: 32px;
  }

  .city-dropdown {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    right: 0;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 6px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    max-height: 220px;
    overflow-y: auto;
    z-index: 50;
    display: none;
  }

  .city-dropdown.open { display: block; }

  .city-option {
    padding: 9px 12px;
    font-size: 13px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background 0.1s;
    color: var(--foreground);
  }

  .city-option:hover, .city-option.highlighted {
    background: rgba(119, 164, 90, 0.1);
  }

  .city-option .city-name { font-weight: 500; }
  .city-option .city-index { color: var(--muted); font-size: 12px; }

  .no-results {
    padding: 10px 12px;
    font-size: 13px;
    color: var(--muted);
    text-align: center;
  }

  .col-disclaimer {
    margin-top: 32px;
    padding: 16px 20px;
    background: rgba(84, 82, 79, 0.3);
    border-radius: 8px;
    font-size: 11px;
    color: var(--muted);
    line-height: 1.7;
  }

  .col-print-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: var(--accent-dim);
    border: 1px solid rgba(119, 164, 90, 0.3);
    border-radius: 6px;
    color: var(--accent);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
    font-family: inherit;
  }

  .col-print-btn:hover { background: rgba(119, 164, 90, 0.25); }

  .card-title-small {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.4px;
    color: var(--accent);
    margin-bottom: 18px;
  }

  /* Responsive */
  @media (max-width: 640px) {
    .hero-section h1 { font-size: 32px; }
    .hero-section { padding: 40px 24px 48px; }
    .personalized .name { font-size: 28px; }
    .form-row { grid-template-columns: 1fr; }
    .result-big-value { font-size: 42px; }
    .scenarios-table th, .scenarios-table td { padding: 10px 12px; font-size: 13px; }
    .col-inputs { grid-template-columns: 1fr; }
    .col-arrow { transform: rotate(90deg); padding: 0; }
    .salary-compare { grid-template-columns: 1fr; }
    .offer-grid { grid-template-columns: 1fr; }
    .col-cat-label { width: 72px; font-size: 11px; }
    .col-percentage { font-size: 42px; }
    .tab-btn { padding: 10px 14px; font-size: 12px; }
    .cta-section h2 { font-size: 24px; }
  }

  @media print {
    header { position: static; }
    .tab-nav { display: none; }
    .tab-panel { display: block !important; }
    .cta-section { display: none; }
    input[type="range"] { display: none; }
    .slider-labels { display: none; }
  }
</style>
</head>
<body>

<!-- Header -->
<header>
  <div class="inner">
    <svg viewBox="0 0 54 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="height:32px;width:auto;color:#f0eeeb;"><g clip-path="url(#bp)"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.1091 9.75295C14.7055 9.22349 15.0977 8.52569 15.0977 7.70842C15.0977 5.83223 13.6551 4.58325 11.1811 4.58325H5.15301C4.81185 4.58325 4.53516 4.86292 4.53516 5.20774V14.7896C4.53516 15.1344 4.81185 15.4141 5.15301 15.4141H11.5921C13.6417 15.4141 15.5087 14.3715 15.5087 12.2889C15.5087 11.1078 14.9795 10.2634 14.1064 9.75023L14.1091 9.75295ZM7.42024 6.77169C7.42024 6.71467 7.46591 6.66851 7.52232 6.66851H11.2321C11.8983 6.66851 12.3657 7.08393 12.3657 7.71114C12.3657 8.33834 11.952 8.75377 11.2321 8.75377H7.52232C7.46591 8.75377 7.42024 8.70761 7.42024 8.65059V6.7744V6.77169ZM11.13 13.3316H7.52232C7.46591 13.3316 7.42024 13.2854 7.42024 13.2284V10.9368C7.42024 10.8797 7.46591 10.8336 7.52232 10.8336H11.13C12.0998 10.8336 12.7794 11.2517 12.7794 12.0826C12.7794 12.9134 12.1804 13.3316 11.13 13.3316Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M26.3827 4.58325H21.1686C19.4869 4.58325 18.0175 5.72634 17.585 7.36631L15.6697 14.6294C15.5649 15.0258 15.8604 15.4168 16.2687 15.4168H17.9745C18.2539 15.4168 18.5011 15.2267 18.5709 14.9525L19.0867 12.9949C19.0974 12.9487 19.1404 12.9188 19.1861 12.9188H24.016C24.0724 12.9188 24.1181 12.965 24.1181 13.022V14.7923C24.1181 15.1371 24.3948 15.4168 24.736 15.4168H26.3853C26.7265 15.4168 27.0032 15.1371 27.0032 14.7923V5.20774C27.0032 4.86292 26.7265 4.58325 26.3853 4.58325H26.3827ZM24.1154 10.7277C24.1154 10.7847 24.0698 10.8309 24.0133 10.8309H19.7878C19.7206 10.8309 19.6696 10.7657 19.6884 10.7005L20.4271 7.9012C20.6205 7.17082 21.2733 6.66308 22.0201 6.66308H24.0133C24.0698 6.66308 24.1154 6.70924 24.1154 6.76625V10.725V10.7277Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M27.9922 12.6528C27.9922 13.3859 28.422 14.1814 29.2413 14.7136C30.0606 15.2403 30.8612 15.4141 31.8793 15.4141H34.4098C36.137 15.4141 37.1041 15.2023 37.816 14.662C38.5305 14.1162 38.8878 13.3044 38.8878 12.2971C38.8878 10.391 37.3163 9.53302 33.8295 8.86509C32.2043 8.55556 30.6892 8.41165 30.6436 7.55637C30.6167 7.07035 30.9417 6.66036 31.9142 6.66036H34.8342C35.3365 6.66036 35.6911 6.78255 35.9786 7.19797C36.0699 7.33373 36.1102 7.55909 36.1263 7.76273C36.1451 8.01795 36.3546 8.21616 36.6072 8.21616H38.1222C38.4285 8.21616 38.6756 7.96636 38.6783 7.65683C38.6783 7.57538 38.6783 7.48306 38.6783 7.3826C38.6783 6.58977 38.2162 5.78608 37.3969 5.25933C36.583 4.72716 35.3365 4.58325 34.3184 4.58325H32.4783C30.7456 4.58325 29.7651 4.83576 29.056 5.38151C28.3468 5.92455 27.9922 6.69838 27.9922 7.70842C27.9922 11.526 36.1236 10.4345 36.1236 12.4871C36.1236 13.0953 35.4762 13.3316 34.7429 13.3316H31.8121C31.0707 13.3316 30.657 12.984 30.657 12.46C30.657 12.46 30.7027 11.8246 30.0338 11.8246H28.5483C28.242 11.8246 27.9922 12.0771 27.9922 12.3867C27.9922 12.4654 27.9922 12.555 27.9922 12.6528Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M49.4663 5.20774V6.0413C49.4663 6.38613 49.1896 6.66579 48.8484 6.66579H42.9735C42.9171 6.66579 42.8714 6.71195 42.8714 6.76897V8.64516C42.8714 8.70218 42.9171 8.74834 42.9735 8.74834H48.0237C48.3649 8.74834 48.6416 9.028 48.6416 9.37283V10.2064C48.6416 10.5512 48.3649 10.8309 48.0237 10.8309H42.9735C42.9171 10.8309 42.8714 10.877 42.8714 10.9341V13.2257C42.8714 13.2827 42.9171 13.3288 42.9735 13.3288H48.8484C49.1896 13.3288 49.4663 13.6085 49.4663 13.9533V14.7869C49.4663 15.1317 49.1896 15.4114 48.8484 15.4114H40.6042C40.263 15.4114 39.9863 15.1317 39.9863 14.7869V5.20774C39.9863 4.86292 40.263 4.58325 40.6042 4.58325H48.8484C49.1896 4.58325 49.4663 4.86292 49.4663 5.20774Z" fill="currentColor"/><path d="M48.8477 0H5.15232C2.30753 0 0 2.33234 0 5.20771V14.7923C0 17.6677 2.30753 20 5.15232 20H48.8477C51.6925 20 54 17.6677 54 14.7923V5.20771C54 2.33234 51.6925 0 48.8477 0ZM51.9396 14.7923C51.9396 16.5164 50.5535 17.9175 48.8477 17.9175H5.15232C3.44384 17.9175 2.06039 16.5191 2.06039 14.7923V5.20771C2.06039 3.48086 3.44384 2.08254 5.15232 2.08254H48.8477C50.5535 2.08254 51.9396 3.48357 51.9396 5.20771V14.7896V14.7923Z" fill="currentColor"/></g><defs><clipPath id="bp"><rect width="54" height="20" fill="currentColor"/></clipPath></defs></svg>
    <span class="company-name">Base Power Company</span>
  </div>
</header>

<!-- Tab navigation -->
<div class="tab-nav">
  <button class="tab-btn active" onclick="switchTab('equity')">Equity Calculator</button>
  <button class="tab-btn" onclick="switchTab('col')">Cost of Living</button>
</div>

<!-- ═══════════════════════════════════════ -->
<!-- TAB 1: EQUITY CALCULATOR               -->
<!-- ═══════════════════════════════════════ -->
<div class="tab-panel active" id="panel-equity">

  <!-- Hero -->
  <section class="hero-section">
    <div class="hero-inner">
      <div class="hero-badge">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
        Your Equity Offer
      </div>
      <h1>Build and benefit with Base</h1>
      <p>At Base, we believe in sharing our success with the team that makes it possible. Use this calculator to explore what your equity stake could be worth as we scale.</p>
    </div>
  </section>

  <!-- Calculator -->
  <section class="content-section">

    <!-- Personalized name (populated via URL params) -->
    <div class="personalized" id="personalizedSection" style="display:none;">
      <div class="label">Personalized for</div>
      <div class="name" id="candidateName"></div>
    </div>

    <!-- Offer Details Card -->
    <div class="card">
      <div class="card-title-small" style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.4px;color:var(--accent);margin-bottom:18px;">Your Offer Details</div>
      <div class="form-row">
        <div class="form-group">
          <label>Base Salary</label>
          <div class="input-wrap">
            <span class="prefix">$</span>
            <input type="text" id="baseSalary" value="150,000" oninput="handleSalaryInput(this)" inputmode="numeric">
          </div>
        </div>
        <div class="form-group">
          <label>RSU Grant Value</label>
          <div class="input-wrap">
            <span class="prefix">$</span>
            <input type="text" id="rsuDollar" value="50,000" oninput="handleRsuDollarInput(this)" inputmode="numeric">
          </div>
        </div>
      </div>
      <div style="margin-top:20px;">
        <label>Grant-Time Valuation</label>
        <div class="grant-valuation-display" style="margin-top:6px;">$4B</div>
      </div>
      <div style="margin-top:16px;">
        <div style="display:flex;gap:24px;font-size:13px;color:var(--muted);">
          <span><strong style="color:var(--foreground);">Vesting:</strong> 5 years</span>
          <span><strong style="color:var(--foreground);">Cliff:</strong> 1 year</span>
        </div>
        <div class="vesting-visual" style="margin-top:8px;">
          <div class="vesting-bar-container" id="vestingBarContainer"></div>
          <div class="vesting-labels" id="vestingLabels"></div>
        </div>
      </div>
    </div>

    <!-- What Could Your Equity Be Worth? -->
    <div class="card" style="text-align:center;">
      <div class="card-title-small" style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.4px;color:var(--accent);margin-bottom:4px;">What could your equity be worth?</div>
      <p style="font-size:13px;color:var(--muted);margin-bottom:24px;">Drag the slider to see how your RSU grant grows at different valuation multiples.</p>
      <div class="slider-area">
        <div class="slider-wrapper">
          <input type="range" id="multipleSlider" min="1" max="25" value="1" oninput="handleMultipleSlider()">
        </div>
        <div class="slider-labels">
          <span>1x</span>
          <span>25x</span>
        </div>
      </div>
      <div class="valuation-display" id="multipleDisplay">1x</div>
      <div class="result-area">
        <div class="result-label" id="resultLabel">POTENTIAL EQUITY VALUE AT 1X</div>
        <div class="result-big-value" id="resultValue">$50,000</div>
        <div class="result-gain" id="resultGainText">No gain at 1x</div>
      </div>
    </div>

    <!-- Total Annual Compensation -->
    <div class="card">
      <div class="card-title-small" style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.4px;color:var(--accent);margin-bottom:18px;">Total Annual Compensation</div>
      <div style="display:grid;grid-template-columns:1fr auto 1fr auto 1fr;align-items:center;gap:8px;text-align:center;">
        <div>
          <div style="font-size:12px;color:var(--muted);margin-bottom:2px;">Base Salary</div>
          <div style="font-size:20px;font-weight:700;color:var(--foreground);" id="baseSalaryDisplay">$150,000</div>
        </div>
        <div style="font-size:18px;color:var(--muted);font-weight:300;">+</div>
        <div>
          <div style="font-size:12px;color:var(--muted);margin-bottom:2px;">Annual RSU Vest</div>
          <div style="font-size:20px;font-weight:700;color:var(--accent);" id="annualVestValue">$10,000</div>
        </div>
        <div style="font-size:18px;color:var(--muted);font-weight:300;">=</div>
        <div>
          <div style="font-size:12px;color:var(--muted);margin-bottom:2px;">Total Comp/Year</div>
          <div style="font-size:22px;font-weight:800;color:var(--accent);" id="totalCompValue">$160,000</div>
        </div>
      </div>
      <div id="totalCompSub" style="text-align:center;font-size:11px;color:var(--muted);margin-top:8px;">at $4B valuation &middot; $50,000 fully vested over 5 yrs</div>

      <!-- Tax estimate section -->
      <div class="tax-section" id="taxSection" style="display:none;">
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
          <!-- Equity Only -->
          <div>
            <div style="margin-bottom:8px;">
              <label style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;color:var(--muted);">Equity Tax Estimate (fully vested)</label>
            </div>
            <div class="tax-row">
              <span class="tax-label">Federal (~24%)</span>
              <span class="tax-value" id="eqFederalTax">-$0</span>
            </div>
            <div class="tax-row">
              <span class="tax-label">State (~5%)</span>
              <span class="tax-value" id="eqStateTax">-$0</span>
            </div>
            <div class="tax-row net">
              <span class="tax-label">After-Tax Equity</span>
              <span class="tax-value" id="eqAfterTax">$0</span>
            </div>
          </div>
          <!-- Total Comp -->
          <div>
            <div style="margin-bottom:8px;">
              <label style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:0.8px;color:var(--muted);">Total Comp Tax Estimate (annual)</label>
            </div>
            <div class="tax-row">
              <span class="tax-label">Federal (~24%)</span>
              <span class="tax-value" id="compFederalTax">-$0</span>
            </div>
            <div class="tax-row">
              <span class="tax-label">State (~5%)</span>
              <span class="tax-value" id="compStateTax">-$0</span>
            </div>
            <div class="tax-row net">
              <span class="tax-label">After-Tax Comp</span>
              <span class="tax-value" id="compAfterTax">$0</span>
            </div>
          </div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:10px;margin-top:12px;">
        <div class="toggle-row">
          <label style="font-size:12px;color:var(--muted);">Show Tax Estimate</label>
          <label class="toggle toggle-sm">
            <input type="checkbox" id="taxToggle" onchange="toggleTax()">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>

    <!-- Valuation Scenarios Table -->
    <div class="card no-padding">
      <div class="card-header">
        <div class="card-title-small" style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.4px;color:var(--accent);margin-bottom:4px;">Valuation Scenarios</div>
        <div class="card-subtitle">See how your equity could grow at different valuation multiples.</div>
      </div>
      <div class="card-body">
        <table class="scenarios-table">
          <thead>
            <tr><th>Multiple</th><th>Equity Value</th><th>Potential Gain</th></tr>
          </thead>
          <tbody id="scenariosBody"></tbody>
        </table>
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="faq-section">
      <div class="card-title-small" style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.4px;color:var(--accent);margin-bottom:16px;">Frequently Asked Questions</div>

      <div class="faq-item">
        <button class="faq-question" onclick="toggleFaq(this)">
          <span>What are RSUs and how do they work?</span>
          <span class="faq-icon">+</span>
        </button>
        <div class="faq-answer">
          <div class="faq-answer-inner">
            <p><strong>Restricted Stock Units (RSUs)</strong> are a form of equity compensation that represent a promise to give you shares (or their cash equivalent) in the company once certain conditions are met — typically a vesting schedule tied to your continued employment.</p>
            <p>Unlike stock options, RSUs don't require you to purchase shares at a set price. They have inherent value as long as the company has value. As the company grows and its valuation increases, the value of your RSUs grows proportionally.</p>
            <p>At Base, your RSU grant is expressed as a dollar amount at the time of your offer. As the company's valuation increases beyond the grant-time valuation, your equity becomes worth more.</p>
          </div>
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question" onclick="toggleFaq(this)">
          <span>How is my equity value calculated?</span>
          <span class="faq-icon">+</span>
        </button>
        <div class="faq-answer">
          <div class="faq-answer-inner">
            <p>Your projected equity value is based on a simple growth multiple. If the company's valuation increases from the grant-time valuation (e.g., $4B) to a higher valuation (e.g., $10B), your equity grows by the same ratio — in this case, 2.5x.</p>
            <p>For example, if your RSU grant is worth <strong>$50,000</strong> at a <strong>$4B valuation</strong>, and the company reaches a <strong>$10B valuation</strong>, your equity would be worth approximately <strong>$125,000</strong> (a 2.5x multiple).</p>
            <p><strong>Important note:</strong> This calculator does not factor in dilution, which can reduce your ownership percentage over time as the company raises additional funding rounds or issues new shares. Actual outcomes depend on company performance, market conditions, share dilution, and other factors. Consult your offer letter and ask your recruiter for details.</p>
          </div>
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question" onclick="toggleFaq(this)">
          <span>What's the difference between private RSUs and publicly traded stock?</span>
          <span class="faq-icon">+</span>
        </button>
        <div class="faq-answer">
          <div class="faq-answer-inner">
            <p><strong>Publicly traded stock</strong> can be bought and sold freely on a stock exchange at any time. Its price is determined by the market in real time, and you can convert it to cash whenever markets are open.</p>
            <p><strong>Private company RSUs</strong> represent equity in a company that is not yet publicly traded. Because there's no open market, the value is based on the company's most recent valuation (set during funding rounds or internal assessments). You typically can't sell private RSUs until a <strong>liquidity event</strong> occurs — such as an IPO, acquisition, or structured secondary sale.</p>
            <p>The tradeoff: private RSUs carry more uncertainty, but they also offer significantly greater upside potential if the company grows substantially before going public.</p>
          </div>
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question" onclick="toggleFaq(this)">
          <span>What does "vesting" mean?</span>
          <span class="faq-icon">+</span>
        </button>
        <div class="faq-answer">
          <div class="faq-answer-inner">
            <p><strong>Vesting</strong> is the process by which you earn your equity over time. It's designed to reward long-term commitment to the company.</p>
            <p>At Base, RSUs vest over a <strong>5-year schedule with a 1-year cliff</strong>. This means you don't earn any equity during your first year (the "cliff" period). After the cliff, 20% of your grant vests, and the remaining equity vests evenly over the following four years.</p>
            <p>If you leave the company before the cliff, you forfeit all unvested RSUs. After the cliff, you keep any RSUs that have already vested.</p>
          </div>
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question" onclick="toggleFaq(this)">
          <span>What is a liquidity event?</span>
          <span class="faq-icon">+</span>
        </button>
        <div class="faq-answer">
          <div class="faq-answer-inner">
            <p>A <strong>liquidity event</strong> is when a private company's equity becomes convertible to cash. The most common types include:</p>
            <p><strong>IPO (Initial Public Offering):</strong> The company lists on a public stock exchange, allowing shareholders to sell their shares on the open market.</p>
            <p><strong>Acquisition:</strong> Another company purchases the business, and equity holders receive cash, stock in the acquiring company, or a combination of both.</p>
            <p><strong>Secondary sale:</strong> Some companies facilitate periodic buyback programs or secondary markets where employees can sell a portion of their vested shares before an IPO.</p>
          </div>
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question" onclick="toggleFaq(this)">
          <span>Are there tax implications for RSUs?</span>
          <span class="faq-icon">+</span>
        </button>
        <div class="faq-answer">
          <div class="faq-answer-inner">
            <p>Yes. For <strong>private company RSUs</strong>, the tax treatment depends on when and how you realize value from them. Generally, RSUs are taxed as ordinary income at the time they settle or become liquid — not when they vest.</p>
            <p>At a public company, RSUs are typically taxed on the vesting date because the shares have a readily determinable market value. At a private company, taxation may be deferred until a liquidity event.</p>
            <p>Tax rules vary significantly by jurisdiction and individual circumstances. We strongly recommend consulting a qualified tax advisor to understand how your specific equity compensation will be taxed.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Disclaimer -->
    <div class="disclaimer">
      <p>*This calculator is for illustrative purposes only. Actual equity value depends on many factors including company performance, market conditions, vesting schedules, and share dilution. The assumptions made above are entirely controlled by you, and do not represent any guarantees from Base Power Company.</p>
    </div>

  </section>

  <!-- CTA -->
  <section class="cta-section">
    <h2>Ready to power the future?</h2>
    <p>Join our mission to build infrastructure that impacts millions. Your work at Base will help modernize the grid and deliver affordable, reliable energy.</p>
    <div style="padding-top:16px;">
      <a href="https://www.basepowercompany.com/" target="_blank" class="cta-button">Learn more about Base</a>
    </div>
  </section>

</div>

<!-- ═══════════════════════════════════════ -->
<!-- TAB 2: COST OF LIVING CALCULATOR       -->
<!-- ═══════════════════════════════════════ -->
<div class="tab-panel" id="panel-col">

  <section class="content-section" style="padding-bottom:48px;">

    <div class="col-hero">
      <h2>Your Dollar Goes Further in Austin</h2>
      <p>See how your offer's purchasing power compares when you move to Austin, TX.</p>
    </div>

    <!-- Location Inputs -->
    <div class="card">
      <div class="card-title-small">Compare Locations</div>
      <div class="col-inputs">
        <div class="form-group">
          <label>Moving From</label>
          <div class="city-search-wrapper">
            <input type="text" id="colCitySearch" placeholder="Type a city..." oninput="handleCitySearch(this.value)" onfocus="handleCitySearch(this.value)" autocomplete="off" style="padding-left:16px;">
            <div class="city-dropdown" id="colCityDropdown"></div>
          </div>
        </div>
        <div class="col-arrow">&#8594;</div>
        <div class="form-group">
          <div class="col-fixed-label">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M7 0.5L8.7 5.3L13.5 5.3L9.6 8.2L11.1 13L7 10.1L2.9 13L4.4 8.2L0.5 5.3L5.3 5.3L7 0.5Z" fill="currentColor"/></svg>
            Moving To
          </div>
          <div class="col-fixed-city">Austin, TX</div>
        </div>
      </div>
    </div>

    <!-- Main COL Result -->
    <div class="card col-result-hero" id="colResultCard" style="display:none;">
      <div class="col-percentage" id="colPercentage">-15%</div>
      <div class="col-direction-text" id="colDirectionText">Austin is <strong>15% cheaper</strong> than San Francisco, CA</div>
    </div>

    <!-- Offer Details -->
    <div class="card" id="colOfferCard" style="display:none;">
      <div class="card-title-small">Your Offer</div>
      <div class="offer-grid">
        <div class="form-group">
          <label>Base Salary</label>
          <div class="input-wrap">
            <span class="prefix">$</span>
            <input type="text" id="colSalary" value="150,000" oninput="handleColSalaryInput(this)" inputmode="numeric">
          </div>
        </div>
        <div class="form-group">
          <label>Annual Bonus (if any)</label>
          <div class="input-wrap">
            <span class="prefix">$</span>
            <input type="text" id="colBonus" value="0" oninput="handleColBonusInput(this)" inputmode="numeric">
          </div>
        </div>
      </div>
    </div>

    <!-- Salary Comparison -->
    <div class="card" id="colSalaryCard" style="display:none;">
      <div class="card-title-small">Purchasing Power Comparison</div>
      <div class="salary-compare">
        <div class="salary-box">
          <div class="salary-box-label" id="colOriginLabel">San Francisco</div>
          <div class="salary-box-value" id="colOriginSalary">$150,000</div>
          <div class="salary-box-sub">feels like at your current city</div>
        </div>
        <div class="salary-box austin">
          <div class="salary-box-label">Austin, TX</div>
          <div class="salary-box-value" id="colAustinEquiv">$176,471</div>
          <div class="salary-box-sub">equivalent purchasing power</div>
        </div>
      </div>
      <div style="margin-top:8px;">
        <div class="purchasing-power-row">
          <div class="pp-icon">&#127968;</div>
          <div class="pp-content">
            <div class="pp-label">Monthly Rent (1BR)</div>
            <div class="pp-values">
              <div class="pp-val origin" id="ppRentOrigin">$3,200</div>
              <div class="pp-val austin" id="ppRentAustin">$1,650</div>
            </div>
          </div>
        </div>
        <div class="purchasing-power-row">
          <div class="pp-icon">&#127869;</div>
          <div class="pp-content">
            <div class="pp-label">Monthly Groceries (1 person)</div>
            <div class="pp-values">
              <div class="pp-val origin" id="ppFoodOrigin">$520</div>
              <div class="pp-val austin" id="ppFoodAustin">$380</div>
            </div>
          </div>
        </div>
        <div class="purchasing-power-row">
          <div class="pp-icon">&#9981;</div>
          <div class="pp-content">
            <div class="pp-label">Monthly Utilities</div>
            <div class="pp-values">
              <div class="pp-val origin" id="ppUtilOrigin">$180</div>
              <div class="pp-val austin" id="ppUtilAustin">$155</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Category Breakdown -->
    <div class="card" id="colCategoryCard" style="display:none;">
      <div class="card-title-small">Category Breakdown</div>
      <div id="colCategoryBars"></div>
      <div style="text-align:center;margin-top:8px;">
        <span style="font-size:10px;color:var(--muted);">&#9664; Austin cheaper&nbsp;&nbsp;|&nbsp;&nbsp;Austin pricier &#9654;</span>
      </div>
    </div>

    <!-- Tax card -->
    <div class="card" id="colTaxCard" style="display:none;">
      <div class="card-title-small">Texas Tax Advantage</div>
      <div style="display:flex;align-items:flex-start;gap:14px;">
        <div style="font-size:28px;flex-shrink:0;">&#127881;</div>
        <div>
          <div style="font-size:15px;font-weight:600;color:var(--accent);margin-bottom:4px;">No state income tax in Texas</div>
          <div style="font-size:13px;color:var(--muted);line-height:1.6;" id="colTaxSavingsText">
            Moving from California (13.3% top rate), you could save an estimated <strong>$19,950</strong> per year on state income taxes alone on a $150K salary.
          </div>
        </div>
      </div>
    </div>

    <div style="text-align:center;">
      <button class="col-print-btn" onclick="window.print()">Print / Save for Reference</button>
    </div>

    <div class="col-disclaimer">
      <strong>Disclaimer:</strong> Cost of living data is approximate and based on aggregate index data. Actual costs vary by neighborhood, lifestyle, and personal spending. Tax information is general and not financial advice. Consult a tax professional for your specific situation.
    </div>

  </section>
</div>

<!-- Footer -->
<footer>
  <div class="inner">
    <svg viewBox="0 0 54 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="height:20px;width:auto;color:var(--muted);opacity:0.5;"><g clip-path="url(#bp2)"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.1091 9.75295C14.7055 9.22349 15.0977 8.52569 15.0977 7.70842C15.0977 5.83223 13.6551 4.58325 11.1811 4.58325H5.15301C4.81185 4.58325 4.53516 4.86292 4.53516 5.20774V14.7896C4.53516 15.1344 4.81185 15.4141 5.15301 15.4141H11.5921C13.6417 15.4141 15.5087 14.3715 15.5087 12.2889C15.5087 11.1078 14.9795 10.2634 14.1064 9.75023L14.1091 9.75295ZM7.42024 6.77169C7.42024 6.71467 7.46591 6.66851 7.52232 6.66851H11.2321C11.8983 6.66851 12.3657 7.08393 12.3657 7.71114C12.3657 8.33834 11.952 8.75377 11.2321 8.75377H7.52232C7.46591 8.75377 7.42024 8.70761 7.42024 8.65059V6.7744V6.77169ZM11.13 13.3316H7.52232C7.46591 13.3316 7.42024 13.2854 7.42024 13.2284V10.9368C7.42024 10.8797 7.46591 10.8336 7.52232 10.8336H11.13C12.0998 10.8336 12.7794 11.2517 12.7794 12.0826C12.7794 12.9134 12.1804 13.3316 11.13 13.3316Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M26.3827 4.58325H21.1686C19.4869 4.58325 18.0175 5.72634 17.585 7.36631L15.6697 14.6294C15.5649 15.0258 15.8604 15.4168 16.2687 15.4168H17.9745C18.2539 15.4168 18.5011 15.2267 18.5709 14.9525L19.0867 12.9949C19.0974 12.9487 19.1404 12.9188 19.1861 12.9188H24.016C24.0724 12.9188 24.1181 12.965 24.1181 13.022V14.7923C24.1181 15.1371 24.3948 15.4168 24.736 15.4168H26.3853C26.7265 15.4168 27.0032 15.1371 27.0032 14.7923V5.20774C27.0032 4.86292 26.7265 4.58325 26.3853 4.58325H26.3827ZM24.1154 10.7277C24.1154 10.7847 24.0698 10.8309 24.0133 10.8309H19.7878C19.7206 10.8309 19.6696 10.7657 19.6884 10.7005L20.4271 7.9012C20.6205 7.17082 21.2733 6.66308 22.0201 6.66308H24.0133C24.0698 6.66308 24.1154 6.70924 24.1154 6.76625V10.725V10.7277Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M27.9922 12.6528C27.9922 13.3859 28.422 14.1814 29.2413 14.7136C30.0606 15.2403 30.8612 15.4141 31.8793 15.4141H34.4098C36.137 15.4141 37.1041 15.2023 37.816 14.662C38.5305 14.1162 38.8878 13.3044 38.8878 12.2971C38.8878 10.391 37.3163 9.53302 33.8295 8.86509C32.2043 8.55556 30.6892 8.41165 30.6436 7.55637C30.6167 7.07035 30.9417 6.66036 31.9142 6.66036H34.8342C35.3365 6.66036 35.6911 6.78255 35.9786 7.19797C36.0699 7.33373 36.1102 7.55909 36.1263 7.76273C36.1451 8.01795 36.3546 8.21616 36.6072 8.21616H38.1222C38.4285 8.21616 38.6756 7.96636 38.6783 7.65683C38.6783 7.57538 38.6783 7.48306 38.6783 7.3826C38.6783 6.58977 38.2162 5.78608 37.3969 5.25933C36.583 4.72716 35.3365 4.58325 34.3184 4.58325H32.4783C30.7456 4.58325 29.7651 4.83576 29.056 5.38151C28.3468 5.92455 27.9922 6.69838 27.9922 7.70842C27.9922 11.526 36.1236 10.4345 36.1236 12.4871C36.1236 13.0953 35.4762 13.3316 34.7429 13.3316H31.8121C31.0707 13.3316 30.657 12.984 30.657 12.46C30.657 12.46 30.7027 11.8246 30.0338 11.8246H28.5483C28.242 11.8246 27.9922 12.0771 27.9922 12.3867C27.9922 12.4654 27.9922 12.555 27.9922 12.6528Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M49.4663 5.20774V6.0413C49.4663 6.38613 49.1896 6.66579 48.8484 6.66579H42.9735C42.9171 6.66579 42.8714 6.71195 42.8714 6.76897V8.64516C42.8714 8.70218 42.9171 8.74834 42.9735 8.74834H48.0237C48.3649 8.74834 48.6416 9.028 48.6416 9.37283V10.2064C48.6416 10.5512 48.3649 10.8309 48.0237 10.8309H42.9735C42.9171 10.8309 42.8714 10.877 42.8714 10.9341V13.2257C42.8714 13.2827 42.9171 13.3288 42.9735 13.3288H48.8484C49.1896 13.3288 49.4663 13.6085 49.4663 13.9533V14.7869C49.4663 15.1317 49.1896 15.4114 48.8484 15.4114H40.6042C40.263 15.4114 39.9863 15.1317 39.9863 14.7869V5.20774C39.9863 4.86292 40.263 4.58325 40.6042 4.58325H48.8484C49.1896 4.58325 49.4663 4.86292 49.4663 5.20774Z" fill="currentColor"/><path d="M48.8477 0H5.15232C2.30753 0 0 2.33234 0 5.20771V14.7923C0 17.6677 2.30753 20 5.15232 20H48.8477C51.6925 20 54 17.6677 54 14.7923V5.20771C54 2.33234 51.6925 0 48.8477 0ZM51.9396 14.7923C51.9396 16.5164 50.5535 17.9175 48.8477 17.9175H5.15232C3.44384 17.9175 2.06039 16.5191 2.06039 14.7923V5.20771C2.06039 3.48086 3.44384 2.08254 5.15232 2.08254H48.8477C50.5535 2.08254 51.9396 3.48357 51.9396 5.20771V14.7896V14.7923Z" fill="currentColor"/></g><defs><clipPath id="bp2"><rect width="54" height="20" fill="currentColor"/></clipPath></defs></svg>
    <span class="confidential">Confidential</span>
  </div>
</footer>

<script>
// ═══════════════════════════════════════════════════════════
// TAB SWITCHING
// ═══════════════════════════════════════════════════════════
function switchTab(tab) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  if (tab === 'equity') {
    document.querySelectorAll('.tab-btn')[0].classList.add('active');
    document.getElementById('panel-equity').classList.add('active');
  } else {
    document.querySelectorAll('.tab-btn')[1].classList.add('active');
    document.getElementById('panel-col').classList.add('active');
  }
}

// ═══════════════════════════════════════════════════════════
// EQUITY CALCULATOR
// ═══════════════════════════════════════════════════════════

const SCENARIO_MULTIPLES = [1, 2, 3, 5, 10, 15, 20];

const CHART_VALUATIONS = [1, 4, 10, 25, 50, 100];
const GRANT_VALUATION_B = 4;

let eqState = {
  baseSalary: 150000,
  rsuDollar: 50000,
  multiple: 1,
  vestingYears: 5,
  cliffYears: 1,
  showTax: false,
};

function fmt(n) {
  if (n >= 1e9) return '$' + (n / 1e9).toFixed(1).replace(/\.0$/, '') + 'B';
  if (n >= 1e6) return '$' + (n / 1e6).toFixed(1).replace(/\.0$/, '') + 'M';
  if (n >= 1e4) return '$' + Math.round(n).toLocaleString('en-US');
  if (n >= 100) return '$' + Math.round(n).toLocaleString('en-US');
  if (n >= 1) return '$' + n.toFixed(2);
  if (n > 0) return '$' + n.toFixed(4);
  return '$0';
}

function fmtWhole(n) {
  return '$' + Math.round(n).toLocaleString('en-US');
}

function fmtCompact(n) {
  if (n >= 1e9) return '$' + (n / 1e9).toFixed(1).replace(/\.0$/, '') + 'B';
  if (n >= 1e6) return '$' + (n / 1e6).toFixed(1).replace(/\.0$/, '') + 'M';
  if (n >= 1e3) return '$' + (n / 1e3).toFixed(0) + 'K';
  return '$' + Math.round(n).toLocaleString('en-US');
}

function formatWithCommas(n) { return n.toLocaleString('en-US'); }

function handleSalaryInput(el) {
  const raw = el.value.replace(/[^0-9]/g, '');
  const num = parseInt(raw, 10) || 0;
  const pos = el.selectionStart;
  const oldLen = el.value.length;
  el.value = num > 0 ? formatWithCommas(num) : '';
  el.setSelectionRange(Math.max(0, pos + (el.value.length - oldLen)), Math.max(0, pos + (el.value.length - oldLen)));
  eqState.baseSalary = num;
  recalculate();
}

function handleRsuDollarInput(el) {
  const raw = el.value.replace(/[^0-9]/g, '');
  const num = parseInt(raw, 10) || 0;
  const pos = el.selectionStart;
  const oldLen = el.value.length;
  el.value = num > 0 ? formatWithCommas(num) : '';
  el.setSelectionRange(Math.max(0, pos + (el.value.length - oldLen)), Math.max(0, pos + (el.value.length - oldLen)));
  eqState.rsuDollar = num;
  recalculate();
}

function handleMultipleSlider() {
  eqState.multiple = parseInt(document.getElementById('multipleSlider').value);
  recalculate();
}

function toggleTax() {
  eqState.showTax = document.getElementById('taxToggle').checked;
  document.getElementById('taxSection').style.display = eqState.showTax ? 'block' : 'none';
  recalculate();
}

let animFrames = {};
function animateValue(el, text) {
  el.textContent = text;
  el.classList.add('animating');
  clearTimeout(animFrames[el.id]);
  animFrames[el.id] = setTimeout(() => el.classList.remove('animating'), 150);
}

function recalculate() {
  const m = eqState.multiple;
  const totalValue = eqState.rsuDollar * m;
  const gain = totalValue - eqState.rsuDollar;
  const annualVest = totalValue / eqState.vestingYears;
  const totalComp = eqState.baseSalary + annualVest;

  // Multiple display
  document.getElementById('multipleDisplay').textContent = m + 'x';

  // Result area
  document.getElementById('resultLabel').textContent = `POTENTIAL EQUITY VALUE AT ${m}X`;
  animateValue(document.getElementById('resultValue'), fmtWhole(totalValue));

  const gainEl = document.getElementById('resultGainText');
  if (gain > 0) {
    gainEl.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg> +${fmtWhole(gain)} potential gain`;
  } else {
    gainEl.textContent = `No gain at ${m}x`;
  }

  // Total Annual Compensation
  animateValue(document.getElementById('baseSalaryDisplay'), fmtWhole(eqState.baseSalary));
  animateValue(document.getElementById('annualVestValue'), fmtWhole(annualVest));
  animateValue(document.getElementById('totalCompValue'), fmtWhole(totalComp));
  document.getElementById('totalCompSub').textContent = `at ${m}x valuation multiple \u00b7 ${fmtWhole(totalValue)} fully vested over ${eqState.vestingYears} yrs`;

  // Tax estimates
  if (eqState.showTax) {
    // Equity only (fully vested)
    const eqFed = totalValue * 0.24;
    const eqSt = totalValue * 0.05;
    document.getElementById('eqFederalTax').textContent = '-' + fmtWhole(eqFed);
    document.getElementById('eqStateTax').textContent = '-' + fmtWhole(eqSt);
    document.getElementById('eqAfterTax').textContent = fmtWhole(totalValue - eqFed - eqSt);

    // Total annual comp (salary + annual vest)
    const compFed = totalComp * 0.24;
    const compSt = totalComp * 0.05;
    document.getElementById('compFederalTax').textContent = '-' + fmtWhole(compFed);
    document.getElementById('compStateTax').textContent = '-' + fmtWhole(compSt);
    document.getElementById('compAfterTax').textContent = fmtWhole(totalComp - compFed - compSt);
  }

  // Tables & vesting bar
  renderScenarios();
  renderVestingBar();
}

function renderVestingBar() {
  const c = document.getElementById('vestingBarContainer');
  const l = document.getElementById('vestingLabels');
  let s = '', lb = '';
  for (let y = 0; y < eqState.vestingYears; y++) {
    const isCliff = y < eqState.cliffYears;
    const pct = !isCliff ? Math.round(((y + 1) / eqState.vestingYears) * 100) : 0;
    s += `<div class="vesting-segment ${isCliff ? 'cliff' : 'vested'}">${!isCliff ? pct + '%' : ''}</div>`;
    lb += `<span>Yr ${y + 1}</span>`;
  }
  c.innerHTML = s;
  l.innerHTML = lb;
}

function renderScenarios() {
  const tbody = document.getElementById('scenariosBody');
  let rows = '';
  SCENARIO_MULTIPLES.forEach(m => {
    const val = eqState.rsuDollar * m;
    const gain = val - eqState.rsuDollar;
    const isHighlighted = m === eqState.multiple;
    const gainText = gain > 0 ? `+${fmtWhole(gain)}` : '+$0';
    const gainClass = gain <= 0 ? ' class="gain-zero"' : '';
    rows += `<tr${isHighlighted ? ' class="highlighted"' : ''}><td>${m}x</td><td>${fmtWhole(val)}</td><td${gainClass}>${gainText}</td></tr>`;
  });
  tbody.innerHTML = rows;
}

function renderComparisonChart() {
  const vals = CHART_VALUATIONS.map(v => {
    const multiple = GRANT_VALUATION_B > 0 ? v / GRANT_VALUATION_B : 0;
    return eqState.rsuDollar * multiple;
  });
  const max = Math.max(...vals, 1);
  const c = document.getElementById('comparisonChart');
  let h = '';
  CHART_VALUATIONS.forEach((m, i) => {
    const w = Math.max(2, (vals[i] / max) * 100);
    const txt = fmtCompact(vals[i]);
    const small = w < 25;
    h += `<div class="chart-bar-row"><div class="chart-label">$${m}B</div><div class="chart-bar-track"><div class="chart-bar-fill bar-${i + 1}" style="width:${w}%;">${!small ? txt : ''}</div></div>${small ? `<div class="chart-bar-value-external">${txt}</div>` : '<div class="chart-bar-value-external"></div>'}</div>`;
  });
  c.innerHTML = h;
}

function toggleFaq(btn) {
  const item = btn.parentElement;
  const answer = item.querySelector('.faq-answer');
  const isOpen = item.classList.contains('open');

  // Close all other FAQs
  document.querySelectorAll('.faq-item.open').forEach(openItem => {
    if (openItem !== item) {
      openItem.classList.remove('open');
      openItem.querySelector('.faq-answer').style.maxHeight = '0';
    }
  });

  if (isOpen) {
    item.classList.remove('open');
    answer.style.maxHeight = '0';
  } else {
    item.classList.add('open');
    answer.style.maxHeight = answer.scrollHeight + 'px';
  }
}

// ═══════════════════════════════════════════════════════════
// COST OF LIVING CALCULATOR
// ═══════════════════════════════════════════════════════════

const CITIES = [
  { name: "San Francisco, CA", overall: 178, housing: 334, grocery: 110, utilities: 97, transport: 130, healthcare: 112, stateIncomeTax: 13.3 },
  { name: "New York, NY", overall: 187, housing: 348, grocery: 117, utilities: 107, transport: 120, healthcare: 110, stateIncomeTax: 10.9 },
  { name: "Manhattan, NY", overall: 235, housing: 500, grocery: 125, utilities: 112, transport: 95, healthcare: 115, stateIncomeTax: 10.9 },
  { name: "Brooklyn, NY", overall: 192, housing: 360, grocery: 118, utilities: 108, transport: 95, healthcare: 112, stateIncomeTax: 10.9 },
  { name: "Los Angeles, CA", overall: 166, housing: 290, grocery: 108, utilities: 100, transport: 133, healthcare: 107, stateIncomeTax: 13.3 },
  { name: "San Diego, CA", overall: 160, housing: 272, grocery: 106, utilities: 108, transport: 118, healthcare: 109, stateIncomeTax: 13.3 },
  { name: "San Jose, CA", overall: 182, housing: 340, grocery: 112, utilities: 103, transport: 118, healthcare: 109, stateIncomeTax: 13.3 },
  { name: "Seattle, WA", overall: 157, housing: 264, grocery: 110, utilities: 92, transport: 122, healthcare: 115, stateIncomeTax: 0 },
  { name: "Boston, MA", overall: 152, housing: 249, grocery: 109, utilities: 115, transport: 115, healthcare: 118, stateIncomeTax: 5.0 },
  { name: "Washington, DC", overall: 152, housing: 260, grocery: 107, utilities: 107, transport: 115, healthcare: 104, stateIncomeTax: 10.75 },
  { name: "Denver, CO", overall: 129, housing: 176, grocery: 103, utilities: 93, transport: 105, healthcare: 108, stateIncomeTax: 4.4 },
  { name: "Chicago, IL", overall: 107, housing: 108, grocery: 103, utilities: 96, transport: 112, healthcare: 104, stateIncomeTax: 4.95 },
  { name: "Miami, FL", overall: 131, housing: 176, grocery: 107, utilities: 99, transport: 111, healthcare: 108, stateIncomeTax: 0 },
  { name: "Portland, OR", overall: 130, housing: 176, grocery: 104, utilities: 88, transport: 115, healthcare: 112, stateIncomeTax: 9.9 },
  { name: "Minneapolis, MN", overall: 109, housing: 120, grocery: 100, utilities: 95, transport: 107, healthcare: 104, stateIncomeTax: 9.85 },
  { name: "Atlanta, GA", overall: 109, housing: 121, grocery: 102, utilities: 98, transport: 110, healthcare: 103, stateIncomeTax: 5.49 },
  { name: "Nashville, TN", overall: 106, housing: 113, grocery: 97, utilities: 96, transport: 100, healthcare: 105, stateIncomeTax: 0 },
  { name: "Raleigh, NC", overall: 102, housing: 107, grocery: 97, utilities: 94, transport: 98, healthcare: 106, stateIncomeTax: 4.5 },
  { name: "Salt Lake City, UT", overall: 107, housing: 122, grocery: 98, utilities: 87, transport: 102, healthcare: 102, stateIncomeTax: 4.65 },
  { name: "Philadelphia, PA", overall: 117, housing: 141, grocery: 107, utilities: 106, transport: 110, healthcare: 105, stateIncomeTax: 3.07 },
  { name: "Pittsburgh, PA", overall: 93, housing: 77, grocery: 101, utilities: 103, transport: 102, healthcare: 99, stateIncomeTax: 3.07 },
  { name: "Detroit, MI", overall: 88, housing: 62, grocery: 95, utilities: 102, transport: 110, healthcare: 100, stateIncomeTax: 4.25 },
  { name: "Houston, TX", overall: 96, housing: 85, grocery: 96, utilities: 103, transport: 102, healthcare: 96, stateIncomeTax: 0 },
  { name: "Dallas, TX", overall: 102, housing: 99, grocery: 97, utilities: 105, transport: 103, healthcare: 101, stateIncomeTax: 0 },
  { name: "Phoenix, AZ", overall: 103, housing: 107, grocery: 97, utilities: 100, transport: 99, healthcare: 100, stateIncomeTax: 2.5 },
  { name: "Columbus, OH", overall: 93, housing: 80, grocery: 98, utilities: 90, transport: 98, healthcare: 100, stateIncomeTax: 3.75 },
  { name: "Charlotte, NC", overall: 100, housing: 100, grocery: 99, utilities: 96, transport: 98, healthcare: 106, stateIncomeTax: 4.5 },
  { name: "Indianapolis, IN", overall: 90, housing: 71, grocery: 97, utilities: 94, transport: 100, healthcare: 100, stateIncomeTax: 3.05 },
  { name: "Kansas City, MO", overall: 91, housing: 73, grocery: 97, utilities: 104, transport: 98, healthcare: 99, stateIncomeTax: 4.8 },
  { name: "Tampa, FL", overall: 103, housing: 107, grocery: 103, utilities: 99, transport: 100, healthcare: 100, stateIncomeTax: 0 },
  { name: "Sacramento, CA", overall: 137, housing: 196, grocery: 105, utilities: 99, transport: 115, healthcare: 105, stateIncomeTax: 13.3 },
  { name: "Oakland, CA", overall: 168, housing: 302, grocery: 112, utilities: 100, transport: 120, healthcare: 110, stateIncomeTax: 13.3 },
  { name: "Baltimore, MD", overall: 108, housing: 117, grocery: 103, utilities: 107, transport: 108, healthcare: 100, stateIncomeTax: 5.75 },
];

const AUSTIN = { name: "Austin, TX", overall: 111, housing: 131, grocery: 97, utilities: 99, transport: 100, healthcare: 98, stateIncomeTax: 0 };
const AUSTIN_COSTS = { rent: 1650, grocery: 380, utilities: 155 };

let colState = { selectedCity: null, salary: 150000, bonus: 0 };

function handleCitySearch(query) {
  const dd = document.getElementById('colCityDropdown');
  if (!query || query.length < 1) { dd.classList.remove('open'); return; }
  const q = query.toLowerCase();
  const matches = CITIES.filter(c => c.name.toLowerCase().includes(q)).slice(0, 8);
  if (matches.length === 0) {
    dd.innerHTML = '<div class="no-results">No matching city found</div>';
    dd.classList.add('open');
    return;
  }
  dd.innerHTML = matches.map(c => {
    const diff = ((c.overall - AUSTIN.overall) / AUSTIN.overall * 100);
    const diffStr = diff > 0 ? `+${diff.toFixed(0)}% vs Austin` : `${diff.toFixed(0)}% vs Austin`;
    return `<div class="city-option" onclick="selectCity('${c.name}')"><span class="city-name">${c.name}</span><span class="city-index">${diffStr}</span></div>`;
  }).join('');
  dd.classList.add('open');
}

function selectCity(name) {
  const city = CITIES.find(c => c.name === name);
  if (!city) return;
  colState.selectedCity = city;
  document.getElementById('colCitySearch').value = city.name;
  document.getElementById('colCityDropdown').classList.remove('open');
  showColResults();
  recalculateCOL();
}

function showColResults() {
  ['colResultCard', 'colOfferCard', 'colSalaryCard', 'colCategoryCard', 'colTaxCard'].forEach(id => {
    document.getElementById(id).style.display = '';
  });
}

function handleColSalaryInput(el) {
  const raw = el.value.replace(/[^0-9]/g, '');
  const num = parseInt(raw, 10) || 0;
  const pos = el.selectionStart;
  const oldLen = el.value.length;
  el.value = num > 0 ? formatWithCommas(num) : '';
  el.setSelectionRange(Math.max(0, pos + (el.value.length - oldLen)), Math.max(0, pos + (el.value.length - oldLen)));
  colState.salary = num;
  recalculateCOL();
}

function handleColBonusInput(el) {
  const raw = el.value.replace(/[^0-9]/g, '');
  const num = parseInt(raw, 10) || 0;
  const pos = el.selectionStart;
  const oldLen = el.value.length;
  el.value = num > 0 ? formatWithCommas(num) : '';
  el.setSelectionRange(Math.max(0, pos + (el.value.length - oldLen)), Math.max(0, pos + (el.value.length - oldLen)));
  colState.bonus = num;
  recalculateCOL();
}

function recalculateCOL() {
  const city = colState.selectedCity;
  if (!city) return;
  const totalComp = colState.salary + colState.bonus;

  const diffPct = ((city.overall - AUSTIN.overall) / city.overall * 100);
  const isCheaper = diffPct > 0;

  const pctEl = document.getElementById('colPercentage');
  pctEl.textContent = `${Math.abs(diffPct).toFixed(0)}%`;
  pctEl.className = 'col-percentage ' + (isCheaper ? 'cheaper' : 'pricier');

  const dirEl = document.getElementById('colDirectionText');
  if (isCheaper) {
    dirEl.innerHTML = `Austin is <strong>${Math.abs(diffPct).toFixed(0)}% more affordable</strong> than ${city.name}`;
  } else {
    dirEl.innerHTML = `Austin is <strong>${Math.abs(diffPct).toFixed(0)}% more expensive</strong> than ${city.name}`;
  }

  const equivalentInAustin = Math.round(totalComp * (city.overall / AUSTIN.overall));
  document.getElementById('colOriginLabel').textContent = city.name.split(',')[0];
  document.getElementById('colOriginSalary').textContent = '$' + formatWithCommas(totalComp);
  document.getElementById('colAustinEquiv').textContent = '$' + formatWithCommas(equivalentInAustin);

  const rentRatio = city.housing / AUSTIN.housing;
  const foodRatio = city.grocery / AUSTIN.grocery;
  const utilRatio = city.utilities / AUSTIN.utilities;

  document.getElementById('ppRentOrigin').textContent = '$' + formatWithCommas(Math.round(AUSTIN_COSTS.rent * rentRatio));
  document.getElementById('ppRentAustin').textContent = '$' + formatWithCommas(AUSTIN_COSTS.rent);
  document.getElementById('ppFoodOrigin').textContent = '$' + formatWithCommas(Math.round(AUSTIN_COSTS.grocery * foodRatio));
  document.getElementById('ppFoodAustin').textContent = '$' + formatWithCommas(AUSTIN_COSTS.grocery);
  document.getElementById('ppUtilOrigin').textContent = '$' + formatWithCommas(Math.round(AUSTIN_COSTS.utilities * utilRatio));
  document.getElementById('ppUtilAustin').textContent = '$' + formatWithCommas(AUSTIN_COSTS.utilities);

  const categories = [
    { name: 'Housing', cityVal: city.housing, austinVal: AUSTIN.housing },
    { name: 'Grocery', cityVal: city.grocery, austinVal: AUSTIN.grocery },
    { name: 'Utilities', cityVal: city.utilities, austinVal: AUSTIN.utilities },
    { name: 'Transport', cityVal: city.transport, austinVal: AUSTIN.transport },
    { name: 'Healthcare', cityVal: city.healthcare, austinVal: AUSTIN.healthcare },
  ];

  const barsEl = document.getElementById('colCategoryBars');
  let barsHTML = '';
  categories.forEach(cat => {
    const diff = ((cat.cityVal - cat.austinVal) / cat.cityVal * 100);
    const isGood = diff > 0;
    const barWidth = Math.min(48, Math.abs(diff) * 0.8);
    const pctText = isGood ? `-${Math.abs(diff).toFixed(0)}%` : `+${Math.abs(diff).toFixed(0)}%`;
    let barStyle;
    if (isGood) {
      barStyle = `right: 50%; width: ${barWidth}%;`;
    } else {
      barStyle = `left: 50%; width: ${barWidth}%;`;
    }
    barsHTML += `
      <div class="col-category-row">
        <div class="col-cat-label">${cat.name}</div>
        <div class="col-cat-bar-area">
          <div class="col-cat-bar-track">
            <div class="baseline"></div>
            <div class="col-cat-bar-fill ${isGood ? 'cheaper' : 'pricier'}" style="${barStyle}"></div>
          </div>
          <div class="col-cat-pct ${isGood ? 'cheaper' : 'pricier'}">${pctText}</div>
        </div>
      </div>
    `;
  });
  barsEl.innerHTML = barsHTML;

  const taxCard = document.getElementById('colTaxCard');
  if (city.stateIncomeTax > 0) {
    taxCard.style.display = '';
    const taxSavings = Math.round(colState.salary * (city.stateIncomeTax / 100));
    const stateName = city.name.split(', ')[1] || '';
    const stateNames = { CA: 'California', NY: 'New York', MA: 'Massachusetts', DC: 'Washington DC', CO: 'Colorado', IL: 'Illinois', OR: 'Oregon', MN: 'Minnesota', GA: 'Georgia', NC: 'North Carolina', UT: 'Utah', PA: 'Pennsylvania', MI: 'Michigan', AZ: 'Arizona', OH: 'Ohio', IN: 'Indiana', MO: 'Missouri', MD: 'Maryland' };
    const fullState = stateNames[stateName] || stateName;
    document.getElementById('colTaxSavingsText').innerHTML =
      `Moving from ${fullState} (${city.stateIncomeTax}% top rate), you could save an estimated <strong>$${formatWithCommas(taxSavings)}</strong> per year on state income taxes alone on a $${formatWithCommas(colState.salary)} salary.`;
  } else {
    taxCard.style.display = 'none';
  }
}

// Close dropdown on outside click
document.addEventListener('click', function(e) {
  const dd = document.getElementById('colCityDropdown');
  const search = document.getElementById('colCitySearch');
  if (!dd.contains(e.target) && e.target !== search) {
    dd.classList.remove('open');
  }
});

// ═══════════════════════════════════════════════════════════
// URL PARAMS & INIT
// ═══════════════════════════════════════════════════════════
document.addEventListener('DOMContentLoaded', () => {
  // Parse URL params
  const params = new URLSearchParams(window.location.search);
  const name = params.get('name');
  const grant = params.get('grant');
  const salary = params.get('salary');

  if (name) {
    document.getElementById('personalizedSection').style.display = '';
    document.getElementById('candidateName').textContent = name;
  }

  if (grant) {
    const grantNum = parseInt(grant, 10) || 0;
    if (grantNum > 0) {
      eqState.rsuDollar = grantNum;
      document.getElementById('rsuDollar').value = formatWithCommas(grantNum);
    }
  }

  if (salary) {
    const salaryNum = parseInt(salary, 10) || 0;
    if (salaryNum > 0) {
      eqState.baseSalary = salaryNum;
      document.getElementById('baseSalary').value = formatWithCommas(salaryNum);
    }
  }

  recalculate();
});
</script>
</body>
</html>
